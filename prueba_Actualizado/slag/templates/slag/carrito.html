{% extends "slag/index.html" %} {% load static %} {% load humanize %} 
{% block title %} CARRITO | SLAG {% endblock %} {% block content %}
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
  crossorigin="anonymous"
/>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
  crossorigin="anonymous"
></script>
<link rel="stylesheet" href="{% static 'slag/css/carrito.css' %}" />
<link rel="stylesheet" href="{% static "slag/css/layout.css" %}"> 
{% if items %}
<div class="contenedor-items">
    {% for item in items %}
    <div class="item-carro">
        <div class="img-carro">
        <img
            src="{{ item.producto.Imagen.url }}"
            alt="{{ item.producto.Name_Prod }}"
            class="img-carro"
        />
        </div>
        <div class="info-carro">
        <h3>{{ item.producto.Name_Prod }}</h3>
        <p class="talla">Talla: {{ item.talla.talla }}</p>
        {% if item.producto.Cost_Prom > 0  %}
            <p class="precio">
                Precio Base: ${{ item.producto.prev_prod|intcomma }}
            </p>
            <p class="Descuento"> 
                Descuento: {{item.producto.Cost_Prom }}%
            </p> 
            <p class="cantidad">Cantidad: {{ item.cantidad }}</p>
            <p class="subtotal">Subtotal: ${{ total_general_Desc|intcomma}}</p>
        {% else %}
        <p class="precio">
            Precio Unitario: ${{ item.producto.prev_prod|intcomma }}
        </p>
        <p class="cantidad">Cantidad: {{ item.cantidad }}</p>
        <p class="subtotal">Subtotal: ${{ item.subtotal|intcomma }}</p>
        {% endif %}
        <form
            method="POST"
            action="{% url 'eliminar_producto' item.id %}"
            style="display: inline"
            id="delete"
        >
            {% csrf_token %}
            <button type="submit" class="boton">Quitar del carrito</button>
        </form>
        </div>
    </div>
    {% endfor %}
    </div>
    <div class="btn-pago">
        <a href="#">
            <button type="button" class="boton-comprar">Realizar compra</button>
        </a>
    </div>
    <div class="precio-total">
        <h1>${{total_general}}</h1>
    </div>
{% else %}
    <div class="msg-vacio">
        <h2 class="msg-vacio">Tu carrito esta vacio </h2>
        <a href ="{% url 'index' %}">
            <button type="button" class="btn btn-dark">Comprar</button>
        </a>
    </div>

{% endif %} 
{% endblock %}
