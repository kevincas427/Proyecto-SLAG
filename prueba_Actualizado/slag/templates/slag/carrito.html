{% extends "slag/index.html" %} {% load static %} {% load humanize %} 
{% block title %} CARRITO | SLAG {% endblock %} {% block content %}
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
  crossorigin="anonymous"
/>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
  crossorigin="anonymous"
></script>
<link rel="stylesheet" href="{% static 'slag/css/carrito.css' %}" />
<link rel="stylesheet" href="{% static "slag/css/layout.css" %}"> 
{% if items %}
<div class="contenedor-items">
    {% for i in items %}
    <div class="item-carro">
        <div class="img-carro">
            <img
                src="{{ i.item.producto.Imagen.url }}"
                alt="{{ i.item.producto.Name_Prod }}"
                class="img-carro"
            />
        </div>
        <div class="info-carro">
            <h3>{{ i.item.producto.Name_Prod }}</h3>
            <p class="talla">Talla: {{ i.item.talla.talla }}</p>

            {% if i.descuento_aplicado > 0 %}
                <p class="precio">
                    Precio Base: <del>${{ i.precio_sin_descuento|intcomma }}</del>
                </p>
                <p class="descuento">
                    Descuento: {{ i.descuento_aplicado }}%
                </p>
                <p class="precio-descuento">
                    Precio con descuento: ${{ i.precio_unitario|intcomma }}
                </p>
            {% else %}
                <p class="precio">
                    Precio Unitario: ${{ i.precio_unitario|intcomma }}
                </p>
            {% endif %}

            <p class="cantidad">Cantidad: {{ i.item.cantidad }}</p>
            <p class="subtotal">Subtotal: ${{ i.total_item|intcomma }}</p>

            <form
                method="POST"
                action="{% url 'eliminar_producto' i.item.id %}"
                style="display: inline"
            >
                {% csrf_token %}
                <button type="submit" class="boton">Quitar del carrito</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>

<div class="btn-pago">
    <a href="#">
        <button type="button" class="boton-comprar">Realizar compra</button>
    </a>
</div>

<div class="precio-total">
    <h1>Total: ${{ total_general|intcomma }}</h1>
</div>

{% else %}
<div class="msg-vacio">
    <h2 class="msg-vacio">Tu carrito está vacío</h2>
    <a href="{% url 'index' %}">
        <button type="button" class="btn btn-dark">Comprar</button>
    </a>
</div>
{% endif %}

{% endblock %}
{% comment %} {% for i in items %}
<tr>
  <td>{{ i.item.producto.Name_Prod }}</td>
  <td>{{ i.item.cantidad }}</td>
  <td>
    {% if i.descuento_aplicado > 0 %}
      <del>${{ i.precio_sin_descuento }}</del> ${{ i.precio_unitario }}
    {% else %}
      ${{ i.precio_unitario }}
    {% endif %}
  </td>
  <td>${{ i.total_item }}</td>
</tr>
{% endfor %}

<tr><th colspan="3">Total:</th><th>${{ total_general }}</th></tr>

 {% endcomment %}





